{"componentChunkName":"component---src-templates-blog-post-js","path":"/webpack/webpack-loader/","result":{"data":{"site":{"siteMetadata":{"title":"凌羡"}},"markdownRemark":{"id":"b0af8347-080f-5dd6-9bce-9903464c1abc","excerpt":"前言 这篇文章假设你已经用过的webpack,并对webpack的loader有一个基本的了解，如果对webpack不了解，建议从官方文档开始。 接下来从三个方面来讲讲loader: 什么是webpack loader webpack loader开发的原则 webpack loader开发实践 loader…","html":"<h2>前言</h2>\n<p>这篇文章假设你已经用过的webpack,并对webpack的loader有一个基本的了解，如果对webpack不了解，建议从<a href=\"https://www.webpackjs.com/\">官方文档</a>开始。</p>\n<p>接下来从三个方面来讲讲loader:</p>\n<ul>\n<li>什么是webpack loader</li>\n<li>webpack loader开发的原则</li>\n<li>webpack loader开发实践</li>\n</ul>\n<h2>loader介绍</h2>\n<p>webpack loader只是一个导出为函数的 JavaScript 模块。loader runner 会调用这个函数，然后把上一个 loader 产生的结果或者资源文件(resource file)传入进去。然后，把返回处理结果应该是 String 或者 Buffer（被转换为一个 string）。另外还可以传递一个可选的 SourceMap 结果（格式为 JSON 对象）。</p>\n<p>loader的调用顺序是从倒序的。比如：我们处理less文件的时候，我们会这样写：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascrip\"><pre class=\"language-javascrip\"><code class=\"language-javascrip\">module: {\n  rules: [\n   {test: /.less$/, use:[&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;style-loader&#39;]}\n ]\n}</code></pre></div>\n<p>会先调用less-loader将less文件转化为css，再调用css-loader处理css代码，最后再调用style-loader将css处理为style样式。</p>\n<h2>loader开发的规范</h2>\n<ul>\n<li>单一职责\n一个loader只处理单一任务，避免多任务耦合。</li>\n<li>链式</li>\n<li>模块化</li>\n<li>无状态</li>\n<li>工具库</li>\n<li>模块依赖</li>\n<li>loader依赖</li>\n<li>共用模块</li>\n<li>绝对路径</li>\n<li>同等依赖</li>\n</ul>\n<h2>loader开发实践<a href=\"https://github.com/cuzvin/learn-webpack-loader\">本地开发loader</a></h2>\n<p>本地开发loader为避免修改需要重复发布loader到npm，可以有两种方式：</p>\n<ul>\n<li>使用npm link方式</li>\n<li>使用webpack的提供的方法</li>\n<li>\n<p>resolveLoader方法\n因为webpack的使用的loader默认使用的<code class=\"language-text\">node_modules</code>里面的文件，所以提供<code class=\"language-text\">resolveLoader</code>方法，可以引用其他文件，比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">resolveLoader<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\nmodules<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'loader/**'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>使用路径追踪到本地loader所在的地址</p>\n<p>比如：我在本地根路径下新建文件<code class=\"language-text\">loaders/my-loader.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n   rules<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n       <span class=\"token punctuation\">{</span>test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.js$/</span><span class=\"token punctuation\">,</span> loader<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span><span class=\"token string\">'loaders/my-loader.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>","frontmatter":{"title":"webpack笔记（一）","date":"January 09, 2020","description":null}}},"pageContext":{"slug":"/webpack/webpack-loader/","previous":{"fields":{"slug":"/typescript/"},"frontmatter":{"title":"Typescript踩坑笔记"}},"next":{"fields":{"slug":"/code-resource/micro-fe/"},"frontmatter":{"title":"粗读微前端框架《alibabacloud-console-os》"}}}},"staticQueryHashes":["63159454","636771615"]}